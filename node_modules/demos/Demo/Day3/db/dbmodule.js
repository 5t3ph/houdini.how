var databaseUrl = "localhost/mydb";
var collections = ["users"]
var db = require("./mongojs").connect(databaseUrl, collections);

//db.users.ensureIndex({email:1},{unique:true});

exports.saveUser = function(username,email) {  
	console.log('Saving user to mongo');
	db.users.save({"username":username, "email":email}, function(err, saved) {
  	if( err || !saved ) console.log("User not saved");
  	else console.log("User saved");
});
}

exports.authenticateUser = function(username,email,response) {
	db.users.find({"name":username,"email":email}, function(err, users) {
	console.log(users);
  	if( err || !users) {
   		response.write("..Not authorized user");
   		response.end();
  	}
  	else if(users.length==0)  {
  		response.write("Not authorized user");
  	response.end();
 	 }
  	else{
    		response.write("Authorized user");
 		response.end();
	}
	});
}