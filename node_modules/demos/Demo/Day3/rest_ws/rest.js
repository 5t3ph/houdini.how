var rest = require('./restler');
var http=require('http');
querystring=require("querystring");
url = require("url");

http.createServer(function(request,response){
	var query=url.parse(request.url).query;
	var name=querystring.parse(query)["bookName"];
var str='';
if(name==="")
str="http://localhost:8080/FirstDemo/resources/books";
else
str="http://localhost:8080/FirstDemo/resources/books/"+name;
rest.get(str).on('complete', function(result) {
  if (result instanceof Error) {
    response.end('Error:', result.message);
  } else {
    response.end(result);
  }
});

}).listen(7000);
console.log("Server started");